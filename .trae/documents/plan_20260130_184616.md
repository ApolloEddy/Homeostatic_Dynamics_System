# HDS 文档参数泄露修正计划

## 问题分析

经过审查，发现以下严重问题：

### 1. 阈值和参数值泄露
- `0.3`, `0.7`, `0.5` 等阈值直接出现在文档中
- `0.1`, `0.05` 等调整值
- `0.4` 等异常检测阈值
- `0.9`, `0.85`, `0.8` 等评估结果

### 2. JSON 示例中的具体数值
```json
"hSocial": 0.44,    // ❌ 真实值泄露
"hEnergy": 0.31,    // ❌ 真实值泄露
"da": 0.22,         // ❌ 真实值泄露
```

### 3. 表格中的具体数值
| T0 | 0.5 | 0.8 | 0.55 | ... |  // ❌ 真实值泄露
| T1 | 0.48 | 0.77 | 0.52 | ... |  // ❌ 真实值泄露

### 4. 代码中的具体数值
```dart
if (verbosity < 0.3)      // ❌ 真实阈值泄露
if (warmth > 0.7)        // ❌ 真实阈值泄露
```

### 5. 时间相关的具体数值
- `0.01` (太短时间不处理)
- `1.0`, `0.5` (sigmoid 函数中的值)
- `k/4` (导数最大值)

### 6. 范围和区间
- `[0.001, 0.1]` (推荐值范围)
- `[-0.3, 0.3]` (情感分数区间)
- `> 0.95` 或 `< 0.05` (饱和状态)

## 修正策略

### 策略 1: 阈值参数化
将所有阈值替换为伪变量：
- `0.3` → `$w_{threshold\_low}$`
- `0.7` → `$w_{threshold\_high}$`
- `0.5` → `$w_{threshold\_mid}$`
- `0.1` → `$w_{adjust\_small}$`
- `0.05` → `$w_{adjust\_tiny}$`
- `0.4` → `$w_{anomaly\_threshold}$`

### 策略 2: JSON 示例抽象化
将 JSON 示例中的具体数值替换为伪变量：
```json
"hSocial": $w_{h\_social\_example}$,
"hEnergy": $w_{h\_energy\_example}$,
"da": $w_{da\_example}$,
```

### 策略 3: 表格数据抽象化
将表格中的具体数值替换为伪变量：
| 时间戳 | $H_{social}$ | $H_{energy}$ | $P_{DA}$ | $P_{NE}$ | $P_{5HT}$ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| $T_0$ | $w_{h\_s0}$ | $w_{h\_e0}$ | $w_{p\_d0}$ | $w_{p\_n0}$ | $w_{p\_h0}$ |

### 策略 4: 代码示例完全移除
移除所有代码示例，只保留：
- 数学公式（LaTeX）
- 表格说明
- 文字描述

### 策略 5: 范围参数化
将所有范围和区间替换为伪变量：
- `[0.001, 0.1]` → `[$w_{\alpha\_min}$, $w_{\alpha\_max}$]`
- `[-0.3, 0.3]` → `[$w_{sentiment\_min}$, $w_{sentiment\_max}$]`
- `> 0.95` → `> $w_{saturation\_high}$`
- `< 0.05` → `< $w_{saturation\_low}$`

## 修正文件清单

需要修正的文件：
1. ✅ `docs/01-introduction.md` - 检查是否有阈值泄露
2. ✅ `docs/02-system-architecture.md` - 检查 JSON 示例
3. ✅ `docs/03-physiological-loop.md` - 检查 sigmoid 相关数值
4. ✅ `docs/04-neural-interface.md` - 检查代码示例和阈值
5. ✅ `docs/05-consolidation.md` - 检查 JSON 示例
6. ✅ `docs/06-mathematical-models.md` - 检查推荐值范围
7. ✅ `docs/07-implementation-guide.md` - 检查阈值和范围
8. ✅ `docs/08-applications.md` - 检查表格和阈值

## 执行步骤

1. **第一步**：修正 `docs/04-neural-interface.md`（最严重，有大量代码示例和阈值）
2. **第二步**：修正 `docs/05-consolidation.md`（有 JSON 示例）
3. **第三步**：修正 `docs/08-applications.md`（有大量表格和阈值）
4. **第四步**：修正 `docs/03-physiological-loop.md`（有 sigmoid 相关数值）
5. **第五步**：修正 `docs/06-mathematical-models.md`（有推荐值范围）
6. **第六步**：修正 `docs/07-implementation-guide.md`（有阈值和范围）
7. **第七步**：修正 `docs/02-system-architecture.md`（有 JSON 示例）
8. **第八步**：修正 `docs/01-introduction.md`（检查阈值）
9. **第九步**：全量审查，确保没有遗漏
10. **第十步**：生成参数解释表

## 预期结果

修正后的文档将：
- ✅ 所有参数使用伪变量表示
- ✅ 所有伪变量在公式下方有解释
- ✅ 代码示例完全移除，只保留数学公式
- ✅ JSON 示例使用伪变量
- ✅ 表格数据使用伪变量
- ✅ 范围和区间使用伪变量