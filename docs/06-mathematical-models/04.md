**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**

# 06.4 参数映射公式
### 4.1 线性插值

#### 4.1.1 定义

线性插值：

$$
\text{lerp}(a, b, t) = a + (b - a) \cdot t
$$

其中：
- $a$：下限
- $b$：上限
- $t$：插值参数（有界：$[t_{\min}, t_{\max}]$）

#### 4.1.2 特性

线性插值的特性：

- **单调性**：$\text{lerp}(a, b, t)$ 关于 $t$ 单调
- **边界性**：$\text{lerp}(a, b, 0) = a$, $\text{lerp}(a, b, 1) = b$
- **线性**：$\text{lerp}(a, b, t)$ 关于 $t$ 线性

### 4.2 行为向量映射

#### 4.2.1 $H_{social}$ 映射

$H_{social}$ 到行为向量的映射：

$$
b_1 = \text{lerp}(b_{1,low}, b_{1,high}, H_{social})
$$

$$
b_2 = \text{lerp}(b_{2,low}, b_{2,high}, H_{social})
$$

#### 4.2.2 $H_{energy}$ 映射

$H_{energy}$ 到行为向量的映射：

$$
b_3 = \text{lerp}(b_{3,low}, b_{3,high}, H_{energy})
$$

$$
b_4 = \text{lerp}(b_{4,low}, b_{4,high}, H_{energy})
$$

#### 4.2.3 $N_{\mathrm{NE}}$ 映射

\(N_{\mathrm{NE}}\) 到行为向量的映射：

$$
b_5 = \text{lerp}(b_{5,low}, b_{5,high}, N_{\mathrm{NE}})
$$

$$
b_6 = \text{lerp}(b_{6,low}, b_{6,high}, N_{\mathrm{NE}})
$$

#### 4.2.4 $N_{\mathrm{DA}}$ 映射

\(N_{\mathrm{DA}}\) 到行为向量的映射：

$$
b_7 = \text{lerp}(b_{7,low}, b_{7,high}, N_{\mathrm{DA}})
$$

#### 4.2.5 $N_{\mathrm{5HT}}$ 映射

\(N_{\mathrm{5HT}}\) 到行为向量的映射：

$$
b_8 = \text{lerp}(b_{8,low}, b_{8,high}, N_{\mathrm{5HT}})
$$

### 4.3 采样参数映射

#### 4.3.1 温度映射

温度映射：

$$
T_t = \mathrm{clamp}\bigl(T_{\min}, T_{\max},\ \alpha_T - \beta_T\cdot N_{\mathrm{NE}}(t)\bigr)
$$

#### 4.3.2 Top-P 映射

Top-P 映射：

$$
P_t = \mathrm{clamp}\bigl(P_{\min}, P_{\max},\ \alpha_P - \beta_{P,\mathrm{NE}}\cdot N_{\mathrm{NE}}(t) + \beta_{P,\mathrm{5HT}}\cdot N_{\mathrm{5HT}}(t)\bigr)
$$

#### 4.3.3 最大 Token 数映射

最大 Token 数映射：

$$
M_t = \mathrm{clamp}\bigl(M_{\min}, M_{\max},\ \alpha_M\cdot f_{\mathrm{energy}}(H_{\mathrm{energy}})\cdot f_{\mathrm{verbosity}}(b_4)\bigr)
$$

其中：

$$
f_{\mathrm{energy}}(H_{\mathrm{energy}}) = \beta_{e,0} + \beta_{e,1}\cdot H_{\mathrm{energy}}
$$

$$
f_{\mathrm{verbosity}}(b_4) = \beta_{v,0} + \beta_{v,1}\cdot b_4
$$

---

**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**
