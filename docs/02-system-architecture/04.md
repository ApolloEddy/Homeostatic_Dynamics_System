**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**

# 02.4 模块职责划分
### 4.1 L1 模块

| 模块 | 职责 | 输入 | 输出 |
| :--- | :--- | :--- | :--- |
| **HomeostaticEngine** | 管理内驱力变量 | 时间间隔、互动质量 | $H_{social}$、$H_{energy}$ |
| **NeuromodulatorSystem** | 管理神经递质系统 | 时间间隔、刺激输入 | \(N_{\mathrm{DA}}, N_{\mathrm{NE}}, N_{\mathrm{5HT}}\) |
| **StimulusNormalizer** | 归一化刺激输入 | 原始刺激（offensiveness、valence） | 归一化刺激 |

### 4.2 L2 模块

| 模块 | 职责 | 输入 | 输出 |
| :--- | :--- | :--- | :--- |
| **BehaviorVector** | 计算行为向量 | 生理状态 | 8 维行为向量 |
| **ControlBundle** | 生成控制输出包 | 生理状态、行为向量 | prompt 注入、采样参数、检索偏置 |
| **StyleCompiler** | 编译风格指令 | 行为向量 | 风格描述字符串 |

### 4.3 L3 模块

| 模块 | 职责 | 输入 | 输出 |
| :--- | :--- | :--- | :--- |
| **MemoryService** | 统一记忆服务接口 | 记忆操作请求 | 记忆操作结果 |
| **MemoryIngester** | 摄入记忆 | 内容、RPE、状态快照 | 记忆条目 |
| **MemoryClassifier** | 分类记忆 | 内容 | 记忆类别 |
| **MemoryRetrievalEnhancer** | 检索记忆 | 查询、状态 | 检索结果 |
| **ConsolidationEngine** | 执行巩固 | 时间窗口 | 巩固报告 |
| **ConsolidationScheduler** | 调度巩固 | 时间间隔 | 巩固触发 |

---

**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**
