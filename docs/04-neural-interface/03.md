**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./02.md)** | **[下一节](./04.md)**

# 04.3 动态系统指令编译
### 3.1 设计原理

动态系统指令编译将行为向量编译为**短小、可控、无主观叙事膨胀**的元指令，注入 system/developer 允许的区域。

### 3.2 注入长度预算

为了避免注意力污染，注入长度预算建议：

$$
M_{\mathrm{inj}} \le M_{\mathrm{inj,max}}
$$

其中：
- \(M_{\mathrm{inj}}\)：本次注入的 token 数量（计数）
- \(M_{\mathrm{inj,max}}\)：注入 token 预算上限（不展示真实数值）

**参数解释**：
- \(M_{\mathrm{inj,max}}\)：用于限制注入长度，降低“注意力污染”与提示词挤占风险

### 3.3 注入格式

#### 3.3.1 状态注入格式

状态注入格式：

```
<hds_state>
initiative=<B_INITIATIVE> warmth=<B_WARMTH> patience=<B_PATIENCE>
verbosity=<B_VERBOSITY> directness=<B_DIRECTNESS> defensiveness=<B_DEFENSIVENESS>
curiosity=<B_CURIOSITY> boundary=<B_BOUNDARY>
</hds_state>
```

#### 3.3.2 风格注入格式

风格注入格式：

```
style: <STYLE_DESCRIPTION>
```

其中：
- `<STYLE_DESCRIPTION>`：风格描述字符串（离散标签或短语；不包含任何真实参数值）

### 3.4 风格描述生成

#### 3.4.1 风格描述规则

风格描述根据行为向量生成，使用伪变量表示阈值：

| 行为向量 | 风格描述 |
| :--- | :--- |
| \(b_4 < \tau_{\mathrm{verbosity,low}}\) | concise |
| \(b_4 > \tau_{\mathrm{verbosity,high}}\) | expanded |
| \(b_2 > \tau_{\mathrm{warmth,high}}\) | warm |
| \(b_2 < \tau_{\mathrm{warmth,low}}\) | cool |
| \(b_6 > \tau_{\mathrm{def,high}}\) | guarded |
| \(b_3 < \tau_{\mathrm{patience,low}}\) | low_patience |
| \(b_1 > \tau_{\mathrm{initiative,high}}\) | proactive |

**参数解释**：
- \(\tau_{\mathrm{verbosity,low}}, \tau_{\mathrm{verbosity,high}}\)：话量阈值（不展示真实数值）
- \(\tau_{\mathrm{warmth,low}}, \tau_{\mathrm{warmth,high}}\)：温暖度阈值（不展示真实数值）
- \(\tau_{\mathrm{def,high}}\)：防御性高阈值（不展示真实数值）
- \(\tau_{\mathrm{patience,low}}\)：耐心度低阈值（不展示真实数值）
- \(\tau_{\mathrm{initiative,high}}\)：主动性高阈值（不展示真实数值）

---

**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./02.md)** | **[下一节](./04.md)**
