**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**

# 07.4 调试与监控
### 4.1 调试信息

#### 4.1.1 状态快照

状态快照包含当前所有状态变量：

| 字段 | 类型 | 说明 |
| :--- | :--- | :--- |
| `hSocial` | Number | 社交饱腹感 |
| `hEnergy` | Number | 认知能量 |
| `da` | Number | 多巴胺水平 |
| `ne` | Number | 去甲肾上腺素水平 |
| `ht` | Number | 血清素水平 |

#### 4.1.2 决策理由

决策理由根据当前状态生成：

| 理由 | 触发条件 | 影响 |
| :--- | :--- | :--- |
| low_energy | \(H_{\mathrm{energy}} < \tau_{\mathrm{energy,low}}\) | 降低耐心度、话量 |
| high_stress | \(N_{\mathrm{NE}} > \tau_{\mathrm{ne,high}}\) | 提升防御性、直率 |
| low_motivation | \(N_{\mathrm{DA}} < \tau_{\mathrm{da,low}}\) | 降低好奇心、主动性 |
| high_social | \(H_{\mathrm{social}} > \tau_{\mathrm{social,high}}\) | 降低主动性、温暖度 |

**参数解释**：
- \(\tau_{\mathrm{energy,low}}\)：低能量阈值（不展示真实数值）
- \(\tau_{\mathrm{ne,high}}\)：高压力/高唤醒阈值（不展示真实数值）
- \(\tau_{\mathrm{da,low}}\)：低动机阈值（不展示真实数值）
- \(\tau_{\mathrm{social,high}}\)：高社交阈值（不展示真实数值）

### 4.2 监控指标

#### 4.2.1 状态饱和率

状态饱和率计算：

$$
\text{saturationRate} = \frac{N_{saturated}}{N_{total}}
$$

其中：
- \(N_{\mathrm{saturated}}\)：饱和状态数量（变量 \(\ge \tau_{\mathrm{sat,high}}\) 或 \(\le \tau_{\mathrm{sat,low}}\) 的计数）
- $N_{total}$：总状态数量

**参数解释**：
- \(\tau_{\mathrm{sat,high}}\)：饱和上限阈值（不展示真实数值）
- \(\tau_{\mathrm{sat,low}}\)：饱和下限阈值（不展示真实数值）

**诊断**：
- 饱和率 \(> \tau_{\mathrm{sat,warning}}\)：需要调参
- 饱和率 \(> \tau_{\mathrm{sat,critical}}\)：需要紧急调参

**参数解释**：
- \(\tau_{\mathrm{sat,warning}}\)：饱和率警告阈值（不展示真实数值）
- \(\tau_{\mathrm{sat,critical}}\)：饱和率严重阈值（不展示真实数值）

#### 4.2.2 恢复半衰期

恢复半衰期计算：

$$
t_{1/2} = \frac{\ln(2)}{\theta}
$$

其中：
- $\theta$：回归速率

**诊断**：
- 半衰期太短：状态变化太快，缺乏惯性
- 半衰期太长：状态变化太慢，缺乏响应性

### 4.3 日志记录

#### 4.3.1 日志级别

日志级别定义：

| 级别 | 说明 | 使用场景 |
| :--- | :--- | :--- |
| debug | 调试信息 | 开发调试 |
| info | 一般信息 | 正常运行 |
| warning | 警告信息 | 需要关注 |
| error | 错误信息 | 需要处理 |

---

**[返回目录](../INDEX.md)** | **[返回本章](./README.md)** | **[上一节](./03.md)** | **[下一节](./05.md)**
